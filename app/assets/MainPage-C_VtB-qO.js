import{c as m,a as e,o,r as h,b as E,d as x,w as T,e as p,t as f,u as l,F as A,n as R,f as I,g as V,h as M,v as N,T as D,i as L,j as S,k as _,R as Z,l as U,m as K,p as H}from"./index-C0cmvDAF.js";import{r as P,l as F,s as $}from"./tasks-DMoEtwJO.js";import{f as b}from"./util-BrY1QKZh.js";import{_ as B,r as z}from"./_plugin-vue_export-helper-C4rQgcta.js";import{g as j,l as G}from"./auth-Dij7fpF-.js";import"./api-Bys2i4Lb.js";function O(a,r){return o(),m("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{d:"M4.75 2A2.75 2.75 0 0 0 2 4.75v6.5A2.75 2.75 0 0 0 4.75 14h3a2.75 2.75 0 0 0 2.75-2.75v-.5a.75.75 0 0 0-1.5 0v.5c0 .69-.56 1.25-1.25 1.25h-3c-.69 0-1.25-.56-1.25-1.25v-6.5c0-.69.56-1.25 1.25-1.25h3C8.44 3.5 9 4.06 9 4.75v.5a.75.75 0 0 0 1.5 0v-.5A2.75 2.75 0 0 0 7.75 2h-3Z"}),e("path",{d:"M8.03 6.28a.75.75 0 0 0-1.06-1.06L4.72 7.47a.75.75 0 0 0 0 1.06l2.25 2.25a.75.75 0 1 0 1.06-1.06l-.97-.97h7.19a.75.75 0 0 0 0-1.5H7.06l.97-.97Z"})])}function Y(a,r){return o(),m("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M1 8a7 7 0 1 1 14 0A7 7 0 0 1 1 8Zm7.75-4.25a.75.75 0 0 0-1.5 0V8c0 .414.336.75.75.75h3.25a.75.75 0 0 0 0-1.5h-2.5v-3.5Z","clip-rule":"evenodd"})])}function q(a,r){return o(),m("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{d:"M5 3.5A1.5 1.5 0 0 1 6.5 2h3A1.5 1.5 0 0 1 11 3.5H5ZM4.5 5A1.5 1.5 0 0 0 3 6.5v.041a3.02 3.02 0 0 1 .5-.041h9c.17 0 .337.014.5.041V6.5A1.5 1.5 0 0 0 11.5 5h-7ZM12.5 8h-9A1.5 1.5 0 0 0 2 9.5v3A1.5 1.5 0 0 0 3.5 14h9a1.5 1.5 0 0 0 1.5-1.5v-3A1.5 1.5 0 0 0 12.5 8Z"})])}const J={class:"flex"},Q=["disabled"],W=["disabled"],X={__name:"TaskCard",props:["task","duration-modal"],setup(a){const r=a,u=h(null),k=h(0);let d=null;const i=h(!1),g=async n=>{const t=await r.durationModal.show("Enter duration","01:30:00");!isNaN(t)&&t>0&&(n.startNewInstance(t),u.value=n.id,k.value=0,y())},c=n=>{n.stopCurrentInstance(),clearInterval(d),u.value=null,k.value=0},y=()=>{d&&clearInterval(d),d=setInterval(()=>{k.value++},1e3)};return(n,t)=>{const w=E("RouterLink");return o(),m("div",{class:R({card:!0,disabled:i.value})},[e("h2",J,[x(w,{to:`/app/task/${a.task.id}`},{default:T(()=>[p(f(a.task.icon)+" "+f(a.task.title),1)]),_:1},8,["to"]),e("button",{class:"inline danger",style:{"font-size":"14px"},disabled:i.value,onClick:t[0]||(t[0]=()=>{l(P)(a.task.id),i.value=!0})},[x(l(z),{class:"inline-icon"})],8,Q)]),u.value===a.task.id&&a.task.currentRunningInstance?(o(),m(A,{key:0},[x(l(Y),{class:"inline-icon"}),p(" Running... Estimated: "+f(l(b)(a.task.currentRunningInstance.estDurationSec))+" Elapsed: "+f(l(b)(k.value)),1),t[3]||(t[3]=e("br",null,null,-1)),e("button",{class:"danger",onClick:t[1]||(t[1]=s=>c(a.task))}," Complete Task ")],64)):(o(),m(A,{key:1},[p(" Avg. estimate: "+f(l(b)(a.task.getAvgEstTime())),1),t[4]||(t[4]=e("br",null,null,-1)),p(" Avg. actual: "+f(l(b)(a.task.getAvgRealTime())),1),t[5]||(t[5]=e("br",null,null,-1)),p(" Avg. bias: "+f(l(b)(a.task.getAvgTimeBias()))+" ("+f(a.task.getAvgTimeBiasPercentage()?.toFixed(1))+"%)",1),t[6]||(t[6]=e("br",null,null,-1)),e("button",{disabled:i.value,class:"full-width",onClick:t[2]||(t[2]=s=>g(a.task))}," Start Tracking ",8,W)],64))],2)}}},tt=B(X,[["__scopeId","data-v-29090c83"]]),et={key:0,class:"modal-overlay"},nt={class:"modal"},at={class:"inputs"},st={__name:"TimeDurationModal",setup(a,{expose:r}){const u=h(!1),k=h("Enter duration"),d=h(0),i=h(0),g=h(0);let c=null;function y(w="Enter duration",s="00:00:00"){k.value=w;const v=s.split(":").map(Number);return d.value=v[0]||0,i.value=v[1]||0,g.value=v[2]||0,u.value=!0,new Promise(C=>{c=C})}function n(){const w=Number(d.value),s=Math.min(Math.max(Number(i.value),0),59),v=Math.min(Math.max(Number(g.value),0),59),C=w*3600+s*60+v;u.value=!1,c&&c(C),c=null}function t(){u.value=!1,c&&c(null),c=null}return r({show:y,ok:n,cancel:t}),(w,s)=>(o(),I(D,{name:"slide"},{default:T(()=>[u.value?(o(),m("div",et,[e("div",nt,[e("h3",null,f(k.value),1),e("div",at,[M(e("input",{type:"number","onUpdate:modelValue":s[0]||(s[0]=v=>d.value=v),min:"0",placeholder:"hh"},null,512),[[N,d.value,void 0,{number:!0}]]),s[3]||(s[3]=p(" : ",-1)),M(e("input",{type:"number","onUpdate:modelValue":s[1]||(s[1]=v=>i.value=v),min:"0",max:"59",placeholder:"mm"},null,512),[[N,i.value,void 0,{number:!0}]]),s[4]||(s[4]=p(" : ",-1)),M(e("input",{type:"number","onUpdate:modelValue":s[2]||(s[2]=v=>g.value=v),min:"0",max:"59",placeholder:"ss"},null,512),[[N,g.value,void 0,{number:!0}]])]),e("div",{class:"buttons"},[e("button",{class:"full-width",onClick:n},"OK"),e("button",{class:"full-width",onClick:t},"Cancel")])])])):V("",!0)]),_:1}))}},lt=B(st,[["__scopeId","data-v-40117f70"]]),ot={class:"flex",style:{gap:"30px","flex-wrap":"wrap"}},it={class:"italic title"},rt={key:0,class:"empty"},ut={key:1},pt={__name:"MainPage",async setup(a){let r,u;const k=K();let d=([r,u]=L(()=>j()),r=await r,u(),r);const i=h(null),g=async n=>{console.log(n.ctrlKey,n.shiftKey,n.key),n.ctrlKey&&n.key==="N"&&n.shiftKey&&(n.preventDefault(),await k.push("/new-task"))};S(async()=>{await F(),document.addEventListener("keydown",g)}),_(()=>{document.removeEventListener("keydown",g)});const c=()=>{G(),k.push("/login")},y=n=>{const t=n.dataset.index;n.style.transitionDelay=`${t*.15}s`};return(n,t)=>(o(),m(A,null,[e("div",ot,[e("h1",it,"Hello, "+f(l(d).username)+"!",1),e("button",{onClick:c},[x(l(O),{class:"inline-icon"}),t[0]||(t[0]=p(" Log out ",-1))])]),e("h3",null,[x(l(q),{class:"inline-icon"}),t[1]||(t[1]=p(" Your Tasks",-1))]),x(l(Z),{to:"/app/new-task"},{default:T(()=>[...t[2]||(t[2]=[e("button",{class:"full-width"},[p(" + Add Task "),e("span",{class:"italic translucent"},"(Ctrl+Shift+N)")],-1)])]),_:1}),l($).tasks.length===0?(o(),m("div",rt,[...t[3]||(t[3]=[e("p",{class:"italic"},"No tasks yet. Add one to get started!",-1)])])):(o(),m("div",ut,[x(U,{name:"slide",tag:"div",appear:"",onEnter:y},{default:T(()=>[(o(!0),m(A,null,H(l($).tasks,(w,s)=>(o(),I(tt,{key:w.id,task:w,"data-index":s,"duration-modal":i.value},null,8,["task","data-index","duration-modal"]))),128))]),_:1})])),x(lt,{ref_key:"durationModal",ref:i},null,512)],64))}};export{pt as default};
