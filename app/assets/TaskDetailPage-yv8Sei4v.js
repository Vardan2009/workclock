import{z as B,g as S,h as A,s as I,r as v,c as l,u as e,a as t,k as x,d as E,e as p,w as N,R as w,t as a,j as D,v as _,F as h,x as L,o as u}from"./index-DMYWl0Kz.js";import{s as R,u as V}from"./tasks-nfZu4ins.js";import{f as i}from"./util-BrY1QKZh.js";import"./api-ucJGmPF1.js";const C={key:0},F={class:"italic title"},M={class:"stats"},P={key:0},U={key:0,class:"empty"},j={key:1},z={key:1},K={__name:"TaskDetailPage",setup(H){const c=I(),T=B(),f=parseInt(T.params.id),n=R.tasks.find(r=>r.id===f);S(()=>{document.addEventListener("keydown",k)}),A(()=>{document.removeEventListener("keydown",k)});const k=r=>{r.key==="Escape"&&c.push("/")},d=v(!1),m=v(n.notes),y=async()=>{d.value=!0,await V(n.id,m.value),d.value=!1};return(r,s)=>e(n)?(u(),l("div",C,[t("p",null,[E(e(w),{to:"/"},{default:N(()=>[...s[1]||(s[1]=[p("Tasks",-1)])]),_:1}),p(" / "+a(e(n).title),1)]),t("h1",F,a(e(n).icon)+" "+a(e(n).title),1),t("div",M,[t("p",null," Avg. Estimated Time: "+a(e(i)(e(n).getAvgEstTime())),1),t("p",null," Avg. Actual Time: "+a(e(i)(e(n).getAvgRealTime())),1),t("p",null," Avg. Bias: "+a(e(i)(e(n).getAvgTimeBias()))+" ("+a(e(n).getAvgTimeBiasPercentage()?.toFixed(1))+"%) ",1),t("p",null,"Total Instances: "+a(e(n).taskInstances.length),1)]),s[4]||(s[4]=t("hr",null,null,-1)),t("h3",null,[s[2]||(s[2]=p(" Task notes ",-1)),d.value?(u(),l("span",P,"*")):D("",!0)]),x(t("textarea",{onChange:y,"onUpdate:modelValue":s[0]||(s[0]=o=>m.value=o),name:"task-notes"},null,544),[[_,m.value]]),s[5]||(s[5]=t("hr",null,null,-1)),s[6]||(s[6]=t("h3",null,"Task Instances",-1)),e(n).taskInstances.length===0?(u(),l("div",U,[...s[3]||(s[3]=[t("p",null,"No instances yet. Start tracking!",-1)])])):(u(),l("ul",j,[(u(!0),l(h,null,L(e(n).taskInstances,(o,g)=>(u(),l("li",{key:g,class:"instance"},[t("strong",null,"Instance "+a(g+1),1),t("p",null," Started: "+a(new Date(o.timestampStarted).toLocaleString()),1),t("p",null," Estimated: "+a(e(i)(o.estDurationSec)),1),t("p",null," Actual: "+a(e(i)(o.realDurationSec)),1),t("p",null," Bias: "+a(e(i)(o.getTimeBias()))+" ("+a((o.getTimeBias()/o.estDurationSec*100).toFixed(1))+"%) ",1)]))),128))]))])):(u(),l("div",z,[...s[7]||(s[7]=[t("p",null,"Task not found",-1)])]))}};export{K as default};
