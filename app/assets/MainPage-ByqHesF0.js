import{c as m,a as e,o,_ as I,r as h,b as E,d as x,w as T,e as p,t as k,u as l,F as A,n as R,f as B,g as V,h as M,v as N,T as D,i as L,j as S,k as _,R as Z,l as U,m as H,p as P}from"./index-BT_MWNEU.js";import{r as F,l as K,s as $}from"./tasks-ejtZoeUY.js";import{f as y}from"./util-BrY1QKZh.js";import{r as z}from"./TrashIcon-B8ouObq1.js";import{g as j,l as G}from"./auth-Sxk6ay7a.js";import"./api-DB2dLq1l.js";function O(n,r){return o(),m("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{d:"M4.75 2A2.75 2.75 0 0 0 2 4.75v6.5A2.75 2.75 0 0 0 4.75 14h3a2.75 2.75 0 0 0 2.75-2.75v-.5a.75.75 0 0 0-1.5 0v.5c0 .69-.56 1.25-1.25 1.25h-3c-.69 0-1.25-.56-1.25-1.25v-6.5c0-.69.56-1.25 1.25-1.25h3C8.44 3.5 9 4.06 9 4.75v.5a.75.75 0 0 0 1.5 0v-.5A2.75 2.75 0 0 0 7.75 2h-3Z"}),e("path",{d:"M8.03 6.28a.75.75 0 0 0-1.06-1.06L4.72 7.47a.75.75 0 0 0 0 1.06l2.25 2.25a.75.75 0 1 0 1.06-1.06l-.97-.97h7.19a.75.75 0 0 0 0-1.5H7.06l.97-.97Z"})])}function Y(n,r){return o(),m("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M1 8a7 7 0 1 1 14 0A7 7 0 0 1 1 8Zm7.75-4.25a.75.75 0 0 0-1.5 0V8c0 .414.336.75.75.75h3.25a.75.75 0 0 0 0-1.5h-2.5v-3.5Z","clip-rule":"evenodd"})])}function q(n,r){return o(),m("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{d:"M5 3.5A1.5 1.5 0 0 1 6.5 2h3A1.5 1.5 0 0 1 11 3.5H5ZM4.5 5A1.5 1.5 0 0 0 3 6.5v.041a3.02 3.02 0 0 1 .5-.041h9c.17 0 .337.014.5.041V6.5A1.5 1.5 0 0 0 11.5 5h-7ZM12.5 8h-9A1.5 1.5 0 0 0 2 9.5v3A1.5 1.5 0 0 0 3.5 14h9a1.5 1.5 0 0 0 1.5-1.5v-3A1.5 1.5 0 0 0 12.5 8Z"})])}const J={class:"flex"},Q=["disabled"],W=["disabled"],X={__name:"TaskCard",props:["task","duration-modal"],setup(n){const r=n,u=h(null),f=h(0);let d=null;const i=h(!1),g=async s=>{const t=await r.durationModal.show("Enter duration","01:30:00");!isNaN(t)&&t>0&&(s.startNewInstance(t),u.value=s.id,f.value=0,b())},c=s=>{s.stopCurrentInstance(),clearInterval(d),u.value=null,f.value=0},b=()=>{d&&clearInterval(d),d=setInterval(()=>{f.value++},1e3)};return(s,t)=>{const w=E("RouterLink");return o(),m("div",{class:R({card:!0,disabled:i.value})},[e("h2",J,[x(w,{to:`/task/${n.task.id}`},{default:T(()=>[p(k(n.task.icon)+" "+k(n.task.title),1)]),_:1},8,["to"]),e("button",{class:"inline danger",style:{"font-size":"14px"},disabled:i.value,onClick:t[0]||(t[0]=()=>{l(F)(n.task.id),i.value=!0})},[x(l(z),{class:"inline-icon"})],8,Q)]),u.value===n.task.id&&n.task.currentRunningInstance?(o(),m(A,{key:0},[x(l(Y),{class:"inline-icon"}),p(" Running... Estimated: "+k(l(y)(n.task.currentRunningInstance.estDurationSec))+" Elapsed: "+k(l(y)(f.value)),1),t[3]||(t[3]=e("br",null,null,-1)),e("button",{class:"danger full-width",onClick:t[1]||(t[1]=a=>c(n.task))}," Complete Task ")],64)):(o(),m(A,{key:1},[p(" Avg. estimate: "+k(l(y)(n.task.getAvgEstTime())),1),t[4]||(t[4]=e("br",null,null,-1)),p(" Avg. actual: "+k(l(y)(n.task.getAvgRealTime())),1),t[5]||(t[5]=e("br",null,null,-1)),p(" Avg. bias: "+k(l(y)(n.task.getAvgTimeBias()))+" ("+k(n.task.getAvgTimeBiasPercentage()?.toFixed(1))+"%)",1),t[6]||(t[6]=e("br",null,null,-1)),e("button",{disabled:i.value,class:"full-width",onClick:t[2]||(t[2]=a=>g(n.task))}," Start Tracking ",8,W)],64))],2)}}},tt=I(X,[["__scopeId","data-v-54effbaa"]]),et={key:0,class:"modal-overlay"},nt={class:"modal"},at={class:"inputs"},st={__name:"TimeDurationModal",setup(n,{expose:r}){const u=h(!1),f=h("Enter duration"),d=h(0),i=h(0),g=h(0);let c=null;function b(w="Enter duration",a="00:00:00"){f.value=w;const v=a.split(":").map(Number);return d.value=v[0]||0,i.value=v[1]||0,g.value=v[2]||0,u.value=!0,new Promise(C=>{c=C})}function s(){const w=Number(d.value),a=Math.min(Math.max(Number(i.value),0),59),v=Math.min(Math.max(Number(g.value),0),59),C=w*3600+a*60+v;u.value=!1,c&&c(C),c=null}function t(){u.value=!1,c&&c(null),c=null}return r({show:b,ok:s,cancel:t}),(w,a)=>(o(),B(D,{name:"slide"},{default:T(()=>[u.value?(o(),m("div",et,[e("div",nt,[e("h3",null,k(f.value),1),e("div",at,[M(e("input",{type:"number","onUpdate:modelValue":a[0]||(a[0]=v=>d.value=v),min:"0",placeholder:"hh"},null,512),[[N,d.value,void 0,{number:!0}]]),a[3]||(a[3]=p(" : ",-1)),M(e("input",{type:"number","onUpdate:modelValue":a[1]||(a[1]=v=>i.value=v),min:"0",max:"59",placeholder:"mm"},null,512),[[N,i.value,void 0,{number:!0}]]),a[4]||(a[4]=p(" : ",-1)),M(e("input",{type:"number","onUpdate:modelValue":a[2]||(a[2]=v=>g.value=v),min:"0",max:"59",placeholder:"ss"},null,512),[[N,g.value,void 0,{number:!0}]])]),e("div",{class:"buttons"},[e("button",{class:"full-width",onClick:s},"OK"),e("button",{class:"full-width",onClick:t},"Cancel")])])])):V("",!0)]),_:1}))}},lt=I(st,[["__scopeId","data-v-40117f70"]]),ot={class:"flex",style:{gap:"30px","flex-wrap":"wrap"}},it={class:"italic title"},rt={key:0,class:"empty"},ut={key:1},pt={__name:"MainPage",async setup(n){let r,u;const f=H();let d=([r,u]=L(()=>j()),r=await r,u(),r);const i=h(null),g=async s=>{s.ctrlKey&&s.key==="N"&&s.shiftKey&&(s.preventDefault(),await f.push("/new-task"))};S(async()=>{await K(),document.addEventListener("keydown",g)}),_(()=>{document.removeEventListener("keydown",g)});const c=()=>{G(),f.push("/login")},b=s=>{const t=s.dataset.index;s.style.transitionDelay=`${t*.15}s`};return(s,t)=>(o(),m(A,null,[e("div",ot,[e("h1",it,"Hello, "+k(l(d).username)+"!",1),e("button",{onClick:c},[x(l(O),{class:"inline-icon"}),t[0]||(t[0]=p(" Log out ",-1))])]),e("h3",null,[x(l(q),{class:"inline-icon"}),t[1]||(t[1]=p(" Your Tasks",-1))]),x(l(Z),{to:"/new-task"},{default:T(()=>[...t[2]||(t[2]=[e("button",{class:"full-width"},[p(" + Add Task "),e("span",{class:"italic translucent"},"(Ctrl+Shift+N)")],-1)])]),_:1}),l($).tasks.length===0?(o(),m("div",rt,[...t[3]||(t[3]=[e("p",{class:"italic"},"No tasks yet. Add one to get started!",-1)])])):(o(),m("div",ut,[x(U,{name:"slide",tag:"div",appear:"",onEnter:b},{default:T(()=>[(o(!0),m(A,null,P(l($).tasks,(w,a)=>(o(),B(tt,{key:w.id,task:w,"data-index":a,"duration-modal":i.value},null,8,["task","data-index","duration-modal"]))),128))]),_:1})])),x(lt,{ref_key:"durationModal",ref:i},null,512)],64))}};export{pt as default};
